# Team4-Back
> 스팀 게임 아카이빙 및 커뮤니티 사이트<br>
> 개발기간: 24.05.20~24.06.14(4주)

![image](https://github.com/user-attachments/assets/83ac3d9f-99ae-42a4-a428-24244d4c9b59)


# 프로젝트 소개
1. 스팀 에서 제공하는 API 활용 (https://steamapi.xpaw.me/)
2. 스팀 로그인을 포함한 소셜 로그인 기능 구현
3. 커뮤니티 게시판 구현 (자유, 리뷰, 공략, 토론 등)
4. 스팀 상점에 있는 상품 불러오기
5. 내 스팀 게임 목록 및 업적 달성률 조회

# 기술 스택
### Backend
<img src="https://img.shields.io/badge/spring-%236DB33F.svg?style=for-the-badge&logo=spring&logoColor=white">  
<img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"> 
<img src="https://img.shields.io/badge/springsecurity-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white"> 
<img src="https://img.shields.io/badge/swagger-85EA2D?style=for-the-badge&logo=swagger&logoColor=white"> 
<img src="https://img.shields.io/badge/JWT-black?style=for-the-badge&logo=JSON%20web%20tokens"> 
<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> 
<img src="https://img.shields.io/badge/phpmyadmin-6C78AF?style=for-the-badge&logo=phpmyadmin&logoColor=white">


### Frontend
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white">
<img src="https://img.shields.io/badge/nextdotjs-000000?style=for-the-badge&logo=nextdotjs&logoColor=white">
<img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=white">
<img src="https://img.shields.io/badge/nodedotjs-5FA04E?style=for-the-badge&logo=nodedotjs&logoColor=white">
<img src="https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=npm&logoColor=white">
<img src="https://img.shields.io/badge/eslint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white">
<img src="https://img.shields.io/badge/prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=white">
<img src="https://img.shields.io/badge/tailwindcss-06B6D4?style=for-the-badge&logo=tailwindcss&logoColor=white">
<img src="https://img.shields.io/badge/nextui-000000?style=for-the-badge&logo=nextui&logoColor=white">

### Communicate
<img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white"> 
<img src="https://img.shields.io/badge/discord-5865F2?style=for-the-badge&logo=discord&logoColor=white"> 

### CI/CD
<img src="https://img.shields.io/badge/gitlab-%23181717.svg?style=for-the-badge&logo=gitlab&logoColor=white">
<img src="https://img.shields.io/badge/jenkins-D24939.svg?style=for-the-badge&logo=jenkins&logoColor=white">
<img src="https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white">

### Monitoring
<img src="https://img.shields.io/badge/grafana-F46800.svg?style=for-the-badge&logo=grafana&logoColor=white">
<img src="https://img.shields.io/badge/prometheus-E6522C.svg?style=for-the-badge&logo=prometheus&logoColor=white">

# 시스템 아키텍쳐
<img src="architecture.png">


# ERD 및 와이어프레임
![image](https://github.com/user-attachments/assets/12182b3c-ceb1-4525-bffe-45af4bc06b2f)
![image](https://github.com/user-attachments/assets/9a2a4ae7-8cde-4f86-8cde-720833d7cd19)


# 화면 구성
![image](https://github.com/user-attachments/assets/f173cd12-fe5b-4167-93c4-90033e54f418)
![image](https://github.com/user-attachments/assets/bf42228c-cf9f-4a0a-b2ce-f071612e59eb)
![image](https://github.com/user-attachments/assets/a987d918-9c7d-4fdd-b4f4-4a0a68a8ae65)
![image](https://github.com/user-attachments/assets/361e3341-2055-46d7-ad0b-17e58e962c65)


# 개발팀 소개
<table>
  <tr> 
    <td align="center"><a href="https://github.com/qpfriday"><img src="https://avatars.githubusercontent.com/u/156289356?s=400&u=80a63713a6e4abf063f32f2af0d5bb823daaefae&v=4" width="100px;" alt=""/><br /><sub><b>BE 팀장 김찬혁</b></sub></a><br /></td>
    <td align="center"><img src="https://secure.gravatar.com/avatar/577de660ddcf91387b28fe6148a2eaf2?s=80&d=identicon" width="100px;" alt=""/><br /><sub><b>BE 팀원 강주연</b></sub><br /></td>      
    <td align="center"><img src="https://secure.gravatar.com/avatar/f820ffb8b3c0facdea23c598b54257ef?s=80&d=identicon" width="100px;" alt=""/><br /><sub><b>BE 팀원 문선민</b></sub><br /></td>     
    <td align="center"><img src="https://secure.gravatar.com/avatar/f36ed20143746db91aeb1b90adfb43bd?s=80&d=identicon" width="100px;" alt=""/><br /><sub><b>BE 팀원 조규은</b></sub><br /></td>     
    <td align="center"><img src="https://secure.gravatar.com/avatar/90cbaf1bfc881fc606cc7078cc3ca8b9?s=80&d=identicon" width="100px;" alt=""/><br /><sub><b>BE 팀원 김동근</b></sub><br /></td>     
    <td align="center"><img src="https://secure.gravatar.com/avatar/edc6fff37436458d144933499b2e826c?s=80&d=identicon" width="100px;" alt=""/><br /><sub><b>FE 팀원 황하연</b></sub><br /></td>     
  </tr>
  <tr>  
    <td>
        <li>관리자 페이지</li>
        <li>회원 API 구축</li>
    </td>  
    <td>
        <li>메인 페이지</li>
        <li>댓글 API 구축</li>
    </td>
    <td>
        <li>게임 목록 페이지</li>
        <li>Security 로직 구현</li>
    </td>
    <td>
        <li>게임 상세 페이지</li>
        <li>게임 API 구현</li>
    </td>
    <td>
        <li>게시물 페이지</li>
        <li>게시물 API 구현</li>
    </td>
    <td>
        <li>마이 페이지</li>
        <li>front 프로젝트 구축</li>
    </td>
  </tr>
</table>


✔ 김동근
- Java 및 Springboot를 활용한 Backend REST API CRUD 구현
- firebase 외부 저장소를 사용하여 데이터베이스에 쓸모없는 공간 낭비 하지 않는 설계
- QueryDSL 를 통해 동시에 API 호출이 3~4회 날아가야 하는 과정이 1번으로 압축되고 조회시간이 5초 > 2초로 향상
- Swagger 문서화를 통해 프론트파트 인원 API 이해, 적용하는 시간 30min > 5min 으로 단축

- React, Typescript, NextJs 활용한 커뮤니티 페이지 제작
- Axios 를 통해 API 호출 및 데이터 처리

# 리펙토링
- 기존 VM 배포 -> AWS EC2 배포 (현재 개인적인 사유로 중단)
![image](https://github.com/user-attachments/assets/14651a68-761b-4160-adeb-aecacdae3787)

- CI/CD Jenkins를 통해 파이프라인 구축/배포 자동화
![image](https://github.com/user-attachments/assets/5cb46f75-1be0-49e4-a49f-751703000bee)


# 트러블슈팅
- 문제 : "Could not write Json: failed to lazily initialize a collection of role" 지연 로딩 문제
- 문제 발생 이유 : QueryDSL로 가지고 올때 연관관계 지어져 있는 테이블을 모두 같이 가지고 와야 하는데 member에 관한 테이블이 같이 조회되지 않았고 member의 LAZY 전략에 의해 지연 로딩에 관한 문제가 발생한 것
- 해결 : fetchJoin을 같이 해주어 동시에 출력이 될 수 있도록 함
- 교훈 : QueryDSL도 좋지만 도메인 복잡성 증가 시 초기 계획이 중요하며 꼼꼼하게 사용하는 것이 좋을것 같다..

# 기억에 남는 코드
![image](https://github.com/user-attachments/assets/fd193883-79b7-4fa1-8ec0-febac27dc76a)
![image](https://github.com/user-attachments/assets/e69eec90-f106-448e-9ec3-9be37c942dd5)

- Firebase라는 외부 저장소를 사용하여 이미지 업로드를 하고 업로드 된 이미지의 url만 가져오기 때문에 데이터베이스 입장에선 공간 낭비를 하지 않을 수 있었다.
- MultipartFile로 외부와 첨부파일로 연결되는 과정이 기억에 남았다.
  
